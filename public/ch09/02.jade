doctype html
html(lang='en')
  head
    title Linear progress
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible',content='IE=edge')
    meta(name='description',content='')
    meta(name='viewport',content='initial-scale=1,maximum-scale=1,user-scalable=no')
    link(rel='stylesheet',href='/angular-material/angular-material.css')
    link(rel='stylesheet',href='http://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic')
    style.
      .progress-cell {
        padding: 16px;
        margin-bottom: 12px;
      }
  body(ng-app='myApp',layout='column',ng-controller='ProgressController')
    md-toolbar.md-toolbar-tools
      h1 Linear progress
      span(flex)
      md-button(ng-click='start()',ng-if='!isStarted') Start
      md-button(ng-click='stop()',ng-if='isStarted') Stop
    md-content(flex)
      .md-body-2(layout-padding) Indeterminate state
      .progress-cell(flex)
        md-progress-linear(md-mode='indeterminate')
      md-divider
      .md-body-2(layout='row',layout-padding) Determinate mode
      .progress-cell(flex)
        md-progress-linear(md-mode='determinate',value='{{currentValue}}')
      md-divider
      .md-body-2(layout='row',layout-padding) Query mode (accent color, hue-3)
      .progress-cell(flex)
        md-progress-linear.md-accent.md-hue-3(md-mode='query')
      md-divider
      .md-body-2(layout='row',layout-padding) Buffer mode (warn color)
      .progress-cell(flex)
        md-progress-linear.md-warn(
          md-mode='buffer'
          value='{{currentValue}}'
          md-buffer-value='{{bufferValue}}'
        )
      md-divider
    script(src='/angular/angular.js')
    script(src='/angular-animate/angular-animate.js')
    script(src='/angular-aria/angular-aria.js')
    script(src='/angular-material/angular-material.js')
    script
      :coffee-script
        angular.module 'progress', []
        .controller 'ProgressController', [
          '$scope'
          '$interval'
          ($scope, $interval) ->
            handler = null
            $scope.isStarted = false
            $scope.currentValue = 0
            $scope.bufferValue = 0

            $scope.start = ->
              handler = $interval(
                ->
                  $scope.currentValue += 2
                  $scope.currentValue = 0 if $scope.currentValue > 100
                  $scope.bufferValue = $scope.currentValue * 1.2
                  $scope.bufferValue = 100 if $scope.bufferValue > 100
                ,
                100
              )
              $scope.isStarted = true

            $scope.stop = ->
              $interval.cancel handler if $scope.isStarted
              $scope.isStarted = false

            $scope.start()
        ]

        angular.module 'myApp', ['ngMaterial', 'progress']
