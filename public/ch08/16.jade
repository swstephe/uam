doctype html
html(lang='en')
  head
    title Grid list
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible',content='IE=edge')
    meta(name='description',content='')
    meta(name='viewport',content='initial-scale=1,maximum-scale=1,user-scalable=no')
    link(rel='stylesheet',href='/angular-material/angular-material.css')
    link(rel='stylesheet',href='http://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic')
    link(rel='stylesheet',href='https://fonts.googleapis.com/icon?family=Material+Icons')
    style.
      .light-text {
        color: white;
      }
      .dark-text {
        color: black;
      }

      md-grid-list md-grid-tile figure {
        cursor: pointer;
      }

      md-grid-list md-grid-tile md-grid-tile-footer {
        background-color: black;
        opacity: 0.7;
      }

      md-grid-list md-grid-tile figure:hover {
        background-color: black;
        opacity: 0.8;
      }
  body(ng-app='myApp',layout='column',ng-controller='GridListController')
    md-toolbar.md-toolbar-tools
      h1 Grid list
    md-content(flex)
      md-grid-list#pictureList(
        md-row-height='3:2'
        md-cols=5
        md-cols-md=4
        md-cols-sm=2
      )
        md-grid-tile(
          ng-repeat='picture in pictures'
          ng-click='selectPicture(picture, $event)'
        )
          md-grid-tile-footer(ng-hide='hideFooter()')
            h3 {{picture.title}}
          div(
            style='width: 100%;height:100%;background-size:calc(100%) calc(100%)'
            ng-style="{'background-image': 'url('+'./images/'+picture.src+')'}"
          )
    script(src='/angular/angular.js')
    script(src='/angular-animate/angular-animate.js')
    script(src='/angular-aria/angular-aria.js')
    script(src='/angular-material/angular-material.js')
    script
      :coffee-script
        angular.module 'gridlist', []
        .controller 'GridListController', [
          '$scope'
          '$mdMedia'
          '$mdDialog'
          ($scope, $mdMedia, $mdDialog) ->
            $scope.pictures = [
              {title: "Crocodile fish",           src: '1.jpg'}
              {title: "Blue-spotted stingray",    src: '2.jpg'}
              {title: "Lionfish",                 src: '3.jpg'}
              {title: "Pufferfish",               src: '4.jpg'}
              {title: "Coral pods over the reef", src: '5.jpg'}
              {title: "Shaol of goatfish",        src: '6.jpg'}
              {title: "Crocodile fish",           src: '7.jpg'}
              {title: "Nudibranch",               src: '8.jpg'}
              {title: "Spotted pods",             src: '9.jpg'}
              {title: "Look into my eyes",        src: '10.jpg'}
              {title: "Triggerfish",              src: '11.jpg'}
              {title: "Napolean",                 src: '12.jpg'}
              {title: "Muray eel",                src: '13.jpg'}
              {title: "Shaol of coral pods",      src: '14.jpg'}
              {title: "Lionfish",                 src: '15.jpg'}
              {title: "Hawkfish",                 src: '16.jpg'}
            ]
            $scope.selectPicture = (picture, ev) ->
              parentPanel = angular.element(
                document.querySelector '#pictureList'
              )
              dialog = $mdDialog.alert()
              .parent parentPanel
              .targetEvent ev
              .clickOutsideToClose true
              .title "Free offer"
              .content "You can download '#{picture.title}' for free."
              .ariaLabel "Free offer"
              .ok "OK"
              $mdDialog.show dialog
              true

            $scope.hideFooter = -> $mdMedia 'sm'
        ]

        angular.module 'myApp', ['ngMaterial', 'gridlist']
