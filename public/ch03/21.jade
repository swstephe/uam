doctype html
html(lang='en')
  head
    title Simple Layout
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible',content='IE=edge')
    meta(name='description',content='')
    meta(name='viewport',content='initial-scale=1,maximum-scale=1,user-scalable=no')
    link(rel='stylesheet',href='/angular-material/angular-material.css')
    link(rel='stylesheet',href='http://fonts.googleapis.com/css?family=Roboto:400,500,700,400italic')
    style.
      div.flex {
        border: 1px solid gray;
        color: black;
        text-align: center;
        padding: 16px;
        height: 80px;
      }
      #content .smallPadding { padding: 8px 16px; }
      #content .normalPadding { padding: 24px 40px; }
  body(ng-app='myApp',layout='column',ng-controller='LayoutController')
    md-toolbar(layout='row')
      h1 &nbsp;&nbsp;{{__layout.screen}}
    md-content#content(ng-controller='CitiesController')
      div(layout='row',layout-wrap,ng-class='__layout.paddingStyle')
        div(ng-class="'flex-' + __layout.itemSize",ng-repeat='city in cities')
          | {{city}}
    
    script(src='/angular/angular.js')
    script(src='/angular-animate/angular-animate.js')
    script(src='/angular-aria/angular-aria.js')
    script(src='/angular-material/angular-material.js')
    script(type='text/javascript')
      :coffee-script
        angular
        .module 'layout', []
        .controller 'LayoutController', [
          '$mdMedia'
          '$scope'
          class LayoutController
            constructor: ($mdMedia, $scope) ->
              self = @
              $scope.$watch(
                ->
                   return 'small' if $mdMedia('sm')
                   return 'medium' if $mdMedia('md')
                   'large'
                (size) ->
                  self.screenSize = size
                  $scope.__layout =
                    screeen: size
                    paddingStyle: getPaddingStyle()
                    itemSize: getItemSize()
              )
            getPaddingStyle: ->
              if self.screenSize == 'small' then 'smallPadding' else 'normalPadding'
            getItemSize: ->
              switch self.screenSize
                when 'small' then 50
                when 'medium' then 33
                else 25
        ]
        angular
        .module 'cities', []
        .controller 'CitiesController', [
          '$scope'
          class CitiesController
            constructor: ($scope) ->
              $scope.cities = [
                "Brussels"
                "Budapest"
                "Oslo"
                "New York"
                "Rome"
                "Seattle"
             ]
        ]
        angular.module 'myApp', ['ngMaterial','layout', 'cities']
